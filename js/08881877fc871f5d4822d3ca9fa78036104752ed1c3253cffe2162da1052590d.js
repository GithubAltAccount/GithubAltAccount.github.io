!function(){var e={779:function(e,r){var t;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],r=0;r<arguments.length;r++){var t=arguments[r];if(t){var i=typeof t;if("string"==i||"number"==i)e.push(t);else if(Array.isArray(t)&&t.length){var o=a.apply(null,t);o&&e.push(o)}else if("object"==i)for(var s in t)n.call(t,s)&&t[s]&&e.push(s)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(t=function(){return a}.apply(r,[]))||(e.exports=t)}()}},r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{}};return e[n](a,a.exports,t),a.exports}t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,{a:r}),r},t.d=function(e,r){for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},function(){"use strict";var e=CoreUtilities,r=React,n=t.n(r),a=ReactDOM,i=50,o=4,s={friend:{key:"friends",value:"Friend"},public:{value:"Public"},Vip:{key:"private",value:"VIP"}},l={descending:"Desc",ascending:"Asc"},c={sortOrder:"Desc",excludeFullGames:!1},u={friendsServersTitle:"Heading.ServersMyFriendsAreIn",publicServersTitle:"Heading.OtherServers",loadMoreButtonText:"Action.LoadMore",playerCountText:"Label.CurrentPlayerCount",noServersFoundText:"Label.NoServersFound",configureServerText:"Action.ConfigureServer",shutdownServerText:"Label.ShutDownServer",shutdownServerSuccess:"Message.ShutdownServerSuccess",shutdownServerError:"Message.ShutdownServerError",slowGameWarning:"Label.SlowGame",joinServerText:"Label.ServerListJoin",serversText:"Label.Servers",privateServerHeader:"Heading.PrivateServers",privateServerTooltip:"Label.PrivateServersAbout",privateServerRefreshText:"Action.Refresh",privateServerPrice:"Label.Price",privateServerPlayWithOthers:"Label.PlayWithOthers",seeAllPrivateServersText:"Label.SeeAllPrivateServers",privateServersNotSupported:"Label.VipServersNotSupported",freeGameText:"Label.Free",maxFreePrivateServersText:"Description.MaxFreePrivateServers",createPrivateServerText:"Action.CreatePrivateServer",paymentCancelledText:"Label.PaymentCancelled",insufficientFunds:"Label.InsufficientFunds",inactiveServerText:"Label.Inactive",renewServerListText:"Label.Renew",renewPrivateServerTitle:"Label.RenewPrivateServer",renewSubscriptionSuccess:"Message.RenewSubscriptionSuccess",renewSubscriptionError:"Message.RenewSubscriptionError",confirmEnableFuturePaymentsText:"Label.ConfirmEnableFuturePayments",startRenewingPrivateServerPrice:"Label.StartRenewingPrivateServerPrice",cancelText:"Label.Cancel",createPrivateServerPriceText:"Label.CreatePrivateServerFor",gameNameText:"Label.GameName",serverNameText:"Label.ServerName",createPrivateServerTitle:"Action.CreatePrivateServer",buyNowText:"Action.BuyNow",createServerFooterText:"Label.FooterText",privateServerLabel:"Label.PrivateServer",cancelAction:"Action.Cancel",transactionFailedHeading:"Heading.TransactionFailed",createServerFooterDescription:"Description.RecurringSubscriptionRenewal",friendInServerLabel:"Label.FriendInServer",twoFriendsInServerLabel:"Label.TwoFriendsInServer",manyFriendsInServerLabel:"Label.ManyFriendsInThisServer",loadServersError:"Message.LoadServersFailure",purchaseError:"Message.InternalErrorPurchaseError",numberOfPlayers:"Label.NumberOfPlayers",hideFullServers:"Label.ExcludeFullServers",descending:"Action.Descending",ascending:"Action.Ascending"},d=PropTypes,v=t.n(d),m=ReactUtilities,p=HeaderScripts,f=Roblox,b=f.EnvironmentUrls.gamesApi,g=function(r){return e.urlService.getAbsoluteUrl("/users/".concat(r,"/profile"))},h=function(r){return e.urlService.getUrlWithQueries("/private-server/configure",{privateServerId:r})},y=function(r){return e.urlService.getUrlWithLocale("/info/vip-server",r)};function S(e,r){var t,n=Object.keys(e);return Object.getOwnPropertySymbols&&(t=Object.getOwnPropertySymbols(e),r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)),n}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?S(Object(t),!0).forEach((function(r){var n,a;n=e,r=t[a=r],a in n?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var E=s,x=function(r,t){return e.urlService.getAbsoluteUrl("".concat(b,"/v1/games/").concat(r,"/servers/").concat(t))},I=function(e){return"".concat(b,"/v1/vip-servers/").concat(e)},T=function(e){return"".concat(b,"/v1/games/vip-servers/").concat(e)},P=function(e){return"".concat(b,"/v1/games/vip-servers/").concat(e)},N=function(e){return"".concat(b,"/v1/vip-servers/").concat(e,"/subscription")},A={getPublicGameInstances:function(r,t,n){return n=2<arguments.length&&void 0!==n?n:{},r={url:x(r,E.public.value),retryable:!0,withCredentials:!0},n=w({cursor:t},n),e.httpService.get(r,n)},getFriendsGameInstances:function(r,t,n){return n=2<arguments.length&&void 0!==n?n:{},r={url:x(r,E.friend.value),retryable:!0,withCredentials:!0},n=w({cursor:t},n),e.httpService.get(r,n)},getVipGameInstances:function(r,t,n){return n=2<arguments.length&&void 0!==n?n:{},r={url:x(r,E.Vip.value),retryable:!0,withCredentials:!0},n=w({cursor:t},n),e.httpService.get(r,n)},shutdownGameInstance:function(r,t,n){var a=null===(i=document.getElementsByName("__RequestVerificationToken")[0])||void 0===i?void 0:i.value,i={url:e.urlService.getAbsoluteUrl("/game-instances/shutdown"),retryable:!0,withCredentials:!0};t={__RequestVerificationToken:a,placeId:r,gameId:t};return n&&(t.privateServerId=n),e.httpService.post(i,t)},createPrivateServer:function(r,t,n){return r={url:P(r),retryable:!0,withCredentials:!0},n={name:t,expectedPrice:n},e.httpService.post(r,n)},getVipServer:function(r){return r={url:I(r),retryable:!0,withCredentials:!0},e.httpService.get(r)},createVipServer:function(r,t,n){return r={url:T(r),retryable:!0,withCredentials:!0},e.httpService.post(r,{name:t,expectedPrice:n})},updateVipServerSubscription:function(r,t,n){return r={url:N(r),retryable:!0,withCredentials:!0},e.httpService.patch(r,{active:t,price:n})}},R=function(){var e=document.getElementById("game-detail-meta-data");return e?{gameDetailUniverseId:parseInt(e.getAttribute("data-universe-id"),10),gameDetailPlaceName:e.getAttribute("data-place-name"),gameDetailPlaceId:parseInt(e.getAttribute("data-place-id"),10),gameDetailPageId:e.getAttribute("data-page-id"),gameDetailGameInstanceId:e.getAttribute("data-game-instance-id"),gameDetailShowShutdownAllButton:"True"===e.getAttribute("data-show-shut-down-all-button"),gameDetailUserCanManagePlace:"True"===e.getAttribute("data-user-can-manage-place"),gameDetailPrivateServerPrice:parseInt(e.getAttribute("data-private-server-price"),10),gameDetailCanCreateServer:"True"===e.getAttribute("data-can-create-server"),gameDetailPrivateServerLimit:parseInt(e.getAttribute("data-private-server-limit"),10)||0,gameDetailSellerName:e.getAttribute("data-seller-name"),gameDetailSellerId:parseInt(e.getAttribute("data-seller-id"),10),gameDetailPrivateServerProductId:parseInt(e.getAttribute("data-private-server-product-id"),10),gameDetailPreopenCreatePrivateServerModal:"True"===e.getAttribute("data-preopen-create-private-server-modal"),gameDetailOpenInviteLinkExpiredModal:"True"===e.getAttribute("data-open-invite-link-expired-modal")}:null};function C(e,r,t,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void t(e)}s.done?r(l):Promise.resolve(l).then(n,a)}function L(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var i=e.apply(r,t);function o(e){C(i,n,a,o,s,"next",e)}function s(e){C(i,n,a,o,s,"throw",e)}o(void 0)}))}}function O(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}}(e,r)||k(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,r){if(e){if("string"==typeof e)return D(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?D(e,r):void 0}}function D(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var M=R,q=c;function j(){return+window.location.pathname.split("/")[2]}function B(r,t,n){var a=t.instanceId,i=t.accessCode;if("computer"===K&&!Q||"tablet"===K&&$||Q)return function(){f.EventStream.SendEventWithTarget("gamePlayIntent","".concat(n,"ServerListJoin"),{lType:"protocol",pid:j(),refuid:null,pg:"gameDetail"},f.EventStream.TargetTypes.WWW),i?f.GameLauncher.joinPrivateGame(r,i):a&&f.GameLauncher.joinGameInstance(r,a)};var o="";o=X?e.urlService.getUrlWithQueries("/games/start",{placeId:r}):"robloxmobile://placeID=".concat(r);return a&&(o+="&gameInstanceId=".concat(a)),i&&(o+="&accessCode=".concat(i)),function(){window.location.href=o}}var G=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=(x=M()).gameDetailUniverseId,a=x.gameDetailPlaceId,i=x.gameDetailPlaceName,o=x.gameDetailCanCreateServer,s=x.gameDetailPrivateServerPrice,l=x.gameDetailUserCanManagePlace,c=x.gameDetailSellerId,u=x.gameDetailSellerName,d=x.gameDetailPrivateServerProductId,v=(I=F((0,r.useState)(!1),2))[0],m=I[1],f=(E=F((0,r.useState)(!1),2))[0],b=E[1],g=(x=F((0,r.useState)([]),2))[0],h=x[1],y=(I=F((0,r.useState)(""),2))[0],S=I[1],w=(0,r.useCallback)(L(regeneratorRuntime.mark((function r(){var n,i,o,s,l=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=0<l.length&&void 0!==l[0]?l[0]:{},i=1<l.length&&void 0!==l[1]&&l[1],v)throw Error("Cannot load more servers while a request is in flight");r.next=4;break;case 4:return m(!0),b(!1),r.prev=6,r.next=9,e(a,i?"":y,n);case 9:return o=r.sent,s=o.data,o=s.data,s=s.nextPageCursor,r.next=15,Promise.all(o.map(function(){var e=L(regeneratorRuntime.mark((function e(r){var n,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r.players&&(r.players=[]),n=r.players,a=r.playerTokens,i={},n.forEach((function(e){i[e.playerToken]=e})),a.forEach((function(e){null==i[e]&&n.push({id:null,name:null,playerToken:e,displayName:null})})),t&&r.vipServerId&&(null===(a=r.owner)||void 0===a?void 0:a.id)===p.authenticatedUser.id)return o=r.vipServerId,e.prev=7,e.next=10,A.getVipServer(o);e.next=17;break;case 10:o=(o=e.sent).data,r.vipServerSubscription=o.subscription,e.next=17;break;case 15:e.prev=15,e.t0=e.catch(7);case 17:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(r){return e.apply(this,arguments)}}()));case 15:h(i?o:function(e,r){var t=O(e),n={};return t.forEach((function(e){void 0!==e.id&&(n[e.id]=e)})),r.forEach((function(e){var r=n[e.id];r?Object.assign(r,e):t.push(e)})),t}(g,o)),S(s),r.next=24;break;case 19:r.prev=19,r.t0=r.catch(6),h([]),S(""),b(!0);case 24:return r.prev=24,m(!1),r.finish(24);case 27:case"end":return r.stop()}}),r,null,[[6,19,24,27]])}))),[v,a,y,g,e,t]),E=(0,r.useCallback)((function(e){if(v)throw Error("Cannot remove server from list while a request is in flight");var r=O(g);r.splice(e,1),h(r)}),[v,g]),x=(0,r.useCallback)((function(e){if(v)throw Error("Cannot clear server while a request is in flight");var r=O(g);(e=r[e]).playerTokens=[],e.players=[],e.playing=0,e.id=null,h(r)}),[v,g]),I=(0,r.useCallback)((function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(v)throw Error("Cannot refresh server list while a request is in flight");w(e,!0)}),[v,w]);return(0,r.useEffect)((function(){w(q)}),[]),{metaData:{universeId:n,placeId:a,placeName:i,canCreateServer:o,price:s,userCanManagePlace:l,sellerId:c,sellerName:u,privateServerProductId:d},servers:g,loadMoreServers:w,removeServerAtIndex:E,clearServerAtIndex:x,refreshServers:I,hasNext:!!y,isBusy:v,setIsBusy:m,hasError:f}},U={common:["CommonUI.Controls"],feature:"Feature.ServerList"},W={common:[],feature:"Feature.PrivateServers"},H=ReactStyleGuide,V=t(779),_=t.n(V),z=RobloxThumbnails,$=p.jsClientDeviceIdentifier.isIE11,J=R,K=(xe=(0,f.DeviceMeta)()).deviceType,Q=xe.isUWPApp,X=xe.isInApp,Y=u,Z=h;function ee(e){var t=e.className,a=e.translate,i=e.gameId,o=e.vipServerId,s=e.isOwner,l=e.canManagePlace,c=e.shutdownServer,u=e.isLoading;s=(e=0<o)&&s,l=null!==i&&(!e&&l||s);return s||l?n().createElement("div",{className:t},n().createElement(H.Popover,{id:"game-instance-dropdown-menu",button:n().createElement(H.IconButton,{iconName:"more",size:H.IconButton.sizes.small,isDisabled:u}),trigger:"click",placement:"bottom"},n().createElement("ul",{className:"dropdown-menu",role:"menu"},s&&n().createElement("li",null,n().createElement(H.Link,{url:Z(o),className:"rbx-private-server-configure"},a(Y.configureServerText))),l&&n().createElement("li",null,n().createElement("button",{type:"button",onClick:c,className:"rbx-private-server-shutdown rbx-private-server-shutdown"},a(Y.shutdownServerText)))))):n().createElement(r.Fragment,null)}ee.defaultProps={className:"",gameId:null,vipServerId:0,isOwner:!1,canManagePlace:!1},ee.propTypes={className:v().string,translate:v().func.isRequired,gameId:v().string,vipServerId:v().number,isOwner:v().bool,canManagePlace:v().bool,shutdownServer:v().func.isRequired,isLoading:v().bool.isRequired};var re=ee,te=ReactDOMServer,ne=RobloxItemPurchase;function ae(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}}(e,r)||function(e,r){if(e){if("string"==typeof e)return ie(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ie(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var oe=u;function se(e){var t=e.translate,a=e.placeName,i=e.creatorName,o=e.price,s=e.renewPrivateServer,l=e.isLoading,c=(d=ae((0,r.useState)(!1),2))[0],u=d[1],d=(e=ae((0,r.useState)(!1),2))[0],v=e[1],m=(i=n().createElement(r.Fragment,null,n().createElement("p",{className:"renew-server-modal-body-text"},t(oe.confirmEnableFuturePaymentsText,{placeName:a,creatorName:i})),n().createElement("p",{className:"renew-server-modal-body-text",dangerouslySetInnerHTML:{__html:t(oe.startRenewingPrivateServerPrice,{price:(0,te.renderToString)(n().createElement(ne.PriceLabel,{price:o}))})}})),(0,r.useCallback)((function(){u(!1)}),[]));o=(0,r.useCallback)((function(){m(),v(!0),s().finally((function(){v(!1)}))}),[s]);return n().createElement(r.Fragment,null,n().createElement(H.Button,{className:"rbx-private-server-renew",onClick:function(){return u(!0)},size:H.Button.sizes.extraSmall,width:H.Button.widths.full,variant:H.Button.variants.control,isDisabled:l||d},t(oe.renewServerListText)),n().createElement(H.SimpleModal,{show:c,title:t(oe.renewPrivateServerTitle),body:i,actionButtonText:t(oe.renewServerListText),neutralButtonText:t(oe.cancelText),onAction:o,onClose:m,onNeutral:m,actionButtonShow:!0}))}se.propTypes={translate:v().func.isRequired,placeName:v().string.isRequired,creatorName:v().string.isRequired,price:v().number.isRequired,renewPrivateServer:v().func.isRequired,isLoading:v().bool.isRequired};var le=(0,m.withTranslations)(se,W),ce=R,ue=u;function de(e){var t=e.translate,a=e.privateServerId,i=e.isPaymentCancelled,o=e.isInsufficientFunds,s=e.isServerInactive,l=e.canRenew,c=e.setSubscription,u=e.isLoading,d=e.systemFeedbackService,v=(p=ce()).gameDetailPlaceName,m=p.gameDetailPrivateServerPrice,p=(e=p.gameDetailSellerName,(0,r.useCallback)((function(){return new Promise((function(e){A.updateVipServerSubscription(a,!0,m).then((function(e){e=e.data,c(e),d.success(t(ue.renewSubscriptionSuccess)||"Successfully renewed private server")}),(function(e){var r=e.data;0<(null===(e=r.errors)||void 0===e?void 0:e.length)?(e=r.errors[0],d.warning(null!==(r=e.userFacingMessage)&&void 0!==r?r:e.message)):d.warning(t(ue.renewSubscriptionError)||"Unable to renew subscription.")})).finally((function(){e()}))}))}),[a,m,c,t,d]));return n().createElement(r.Fragment,null,i&&n().createElement("div",{className:"rbx-private-server-subscription-alert text-alert"},n().createElement("span",{className:"icon-remove"}),n().createElement("span",{className:"rbx-private-server-subscription-alert-text"},t(ue.paymentCancelledText))),o&&n().createElement("div",{className:"rbx-private-server-insufficient-funds text-alert"},n().createElement("span",{className:"icon-remove"}),t(ue.insufficientFunds)),s&&n().createElement("div",{className:"rbx-private-server-inactive"},n().createElement("span",{className:"icon-turn-off"}),t(ue.inactiveServerText)),l&&n().createElement(le,{placeName:v,creatorName:e,price:m,renewPrivateServer:p,isLoading:u}))}de.propTypes={translate:v().func.isRequired,privateServerId:v().number.isRequired,isPaymentCancelled:v().bool.isRequired,isInsufficientFunds:v().bool.isRequired,isServerInactive:v().bool.isRequired,canRenew:v().bool.isRequired,setSubscription:v().func.isRequired,isLoading:v().bool.isRequired,systemFeedbackService:v().shape({success:v().func.isRequired,warning:v().func.isRequired}).isRequired};var ve=(0,m.withTranslations)(de,U),me=g;function pe(e){var r=e.ownerUserId;e=e.ownerName;return n().createElement("div",{className:"rbx-private-owner"},n().createElement(H.Link,{title:e,url:me(r),className:"avatar avatar-card-fullbody owner-avatar"},n().createElement(z.Thumbnail2d,{type:z.ThumbnailTypes.avatarHeadshot,size:z.DefaultThumbnailSize,targetId:r,containerClass:"avatar-card-image"})),n().createElement(H.Link,{url:me(r),className:"text-name text-overflow"},e))}pe.propTypes={ownerUserId:v().number.isRequired,ownerName:v().string.isRequired};var fe=pe,be=g,ge=u;function he(e){function t(e){return void 0===e?n().createElement(r.Fragment,null):n().createElement(H.Link,{href:be(e.id),className:"text-name"},e.displayName)}var a=e.translate,i=e.players,o=(0,r.useMemo)((function(){return i.filter((function(e){return null!==e.id&&e.id!==p.authenticatedUser.id}))}),[i]);e=(0,r.useMemo)((function(){if(0===o.length)return"";var e=(0,te.renderToString)(t(o[0]));if(1===o.length)return a(ge.friendInServerLabel,{friend:e})||"Friends in this server: ".concat(e);var r=(0,te.renderToString)(t(o[1]));if(2===o.length)return a(ge.twoFriendsInServerLabel,{firstFriend:e,secondFriend:r})||"Friends in this server: ".concat(e," and ").concat(r);var n=o.length-2;return"Friends in this server: ".concat(e,", ").concat(r,", and ").concat(n," ").concat(1==n?"other":"others")}),[o,a]);return 0===o.length?n().createElement(r.Fragment,null):n().createElement("div",{className:"text friends-in-server-label",dangerouslySetInnerHTML:{__html:e}})}function ye(e){var t=e.children,a=(0,r.useState)(Ae),i=(e=a[0],a[1]);return(0,r.useEffect)((function(){Te(Pe.serverTab,Ne.serverTab).then((function(e){i({disableJoinButtonForFullServers:!(null==e||!e.ShouldDisableJoinButtonForFullServers)})})).catch((function(e){console.error(e)}))}),[]),n().createElement(Re.Provider,{value:e},t)}he.propTypes={translate:v().func.isRequired,players:v().arrayOf(v().any).isRequired};var Se=he,we=f.EnvironmentUrls.apiGatewayUrl,Ee=function(e,r,t){return{url:we+"/product-experimentation-platform/v1/projects/"+e+"/layers/"+r+"/values?parameters="+t.join(","),withCredentials:!0}},xe=(d={homePage:{AvatarHomepageRecommendationsRowNum:0,IsDiscoveryApiEnabled:!0},serverTab:{ShouldDisableJoinButtonForFullServers:!1},gameDetails:{ShouldHidePrivateServersInAboutTab:!1},searchPage:{ShouldShowFeaturedTileCreatorName:!1}},V={homePage:"PlayerApp.HomePage.UX",serverTab:"GameDetails.ServersTab",gameDetails:"Website.GameDetails",searchPage:"Website.SearchResultsPage"},f.EnvironmentUrls.apiGatewayUrl),Ie=function(){return(Ie=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},Te=function(r,t,n){return void 0===n&&(n=1),function(e,r,t,n){return new(t=t||Promise)((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var r;e.done?a(e.value):((r=e.value)instanceof t?r:new t((function(e){e(r)}))).then(o,s)}l((n=n.apply(e,r||[])).next())}))}(void 0,void 0,Promise,(function(){var a,i;return function(e,r){var t,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e.httpService.get(Ee(n,r,Object.keys(t)))];case 1:return a=o.sent().data,i=Object.keys(a).reduce((function(e,r){return null!==a[r]&&(e[r]=a[r]),e}),{}),[2,Ie(Ie({},t),i)];case 2:return o.sent(),[2,t];case 3:return[2]}}))}))},Pe=V,Ne=d,Ae={disableJoinButtonForFullServers:!1},Re=(0,r.createContext)(Ae),Ce=Re;function Le(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Oe=g,Fe=u,ke=s;function De(e){var t=e.maxPlayerCount;e=e.currentPlayerCount;return t?(t=Math.round(e/t*100),n().createElement("div",{className:"server-player-count-gauge border"},n().createElement("div",{className:"gauge-inner-bar border",style:{width:"".concat(t,"%")}}))):n().createElement(r.Fragment,null)}function Me(e){return e=e.player,n().createElement("span",{key:e.playerToken,className:"avatar avatar-headshot-md player-avatar"},null==e.id?n().createElement(z.Thumbnail2d,{type:z.ThumbnailTypes.avatarHeadshot,token:e.playerToken,containerClass:"avatar-card-image"}):n().createElement(H.Link,{className:"avatar-card-link",href:Oe(e.id)},n().createElement(z.Thumbnail2d,{type:z.ThumbnailTypes.avatarHeadshot,targetId:e.id,containerClass:"avatar-card-image",altName:e.displayName})))}function qe(e){var t=e.id,a=e.translate,i=e.cssKey,o=e.serverListType,s=e.placeId,l=e.gameServerStatus,c=e.canManagePlace,u=e.name,d=e.vipServerId,v=e.vipServerSubscription,m=e.accessCode,f=e.showSlowGameMessage,b=e.owner,g=e.players,h=e.onShutdownServerSuccess,y=e.systemFeedbackService,S=e.isLoading,w=e.setIsLoading,E=e.maxPlayers,x=e.currentPlayersCount,I=(O=function(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}}(e,r)||function(e,r){if(e){if("string"==typeof e)return Le(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Le(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(v),2))[0],T=O[1],P=(null==b?void 0:b.id)===p.authenticatedUser.id,N=!!d,R=N&&!m,C=(0,r.useContext)(Ce);(0,r.useEffect)((function(){T(v)}),[v]);var L=null==g?void 0:g.slice(0,5),O=(e=(O=(e=0<d)&&P)||null!==t&&(!e&&c||O),0<x-L.length&&"+".concat(x-L.length));return n().createElement("li",{className:"rbx-".concat(i,"game-server-item col-md-3 col-sm-4 col-xs-6")},n().createElement("div",{className:"card-item"},n().createElement("div",{className:"player-thumbnails-container"},L.map((function(e){return n().createElement(Me,{key:e.playerToken,player:e})})),!!O&&n().createElement("span",{className:"avatar avatar-headshot-md player-avatar hidden-players-placeholder"},O)),n().createElement("div",{className:_()("rbx-".concat(i,"game-server-details"),"game-server-details",{"border-right":o===ke.Vip.key})},(!!u||!!e)&&n().createElement("div",{className:"section-header"},u&&n().createElement("span",{className:"font-bold"},u),n().createElement(re,{className:"link-menu rbx-".concat(i,"game-server-menu"),translate:a,placeId:s,gameId:t,vipServerId:d,isOwner:P,canManagePlace:c,shutdownServer:function(){S&&y.warning(a(Fe.shutdownServerError)),w(!0),A.shutdownGameInstance(s,t,d).then((function(){y.success(a(Fe.shutdownServerSuccess)),h()}),(function(){y.warning(a(Fe.shutdownServerError))})).finally((function(){w(!1)}))},isLoading:S})),N&&n().createElement(fe,{ownerUserId:b.id,ownerName:b.displayName}),n().createElement("div",{className:"text-info rbx-game-status rbx-".concat(i,"game-server-status text-overflow")},l),n().createElement(De,{maxPlayerCount:E,currentPlayerCount:x}),!N&&n().createElement(Se,{translate:a,players:g}),f&&n().createElement("div",{className:"rbx-".concat(i,"game-server-alert")},n().createElement("span",{className:"icon-remove"}),a(Fe.slowGameWarning)),N&&n().createElement(ve,{privateServerId:d,isPaymentCancelled:!(null!=I&&I.active)&&0<(null==I?void 0:I.price),isInsufficientFunds:null==I?void 0:I.hasInsufficientFunds,isServerInactive:R,canRenew:(null==I?void 0:I.canRenew)&&!(null!=I&&I.active),setSubscription:T,isLoading:S,systemFeedbackService:y}),!R&&!(null!=I&&I.isExpired)&&n().createElement("span",{"data-placeid":s},n().createElement(H.Button,{className:"btn-full-width btn-control-xs rbx-".concat(i,"game-server-join game-server-join-btn"),onClick:B(s,{instanceId:t,accessCode:m},o),isDisabled:S||C.disableJoinButtonForFullServers&&E<=x},a(Fe.joinServerText))))))}qe.defaultProps={id:null,cssKey:"",serverListType:"",canManagePlace:!1,name:"",vipServerId:0,accessCode:"",showSlowGameMessage:!1,owner:void 0,vipServerSubscription:void 0,players:[],maxPlayers:0,currentPlayersCount:0},qe.propTypes={id:v().string,translate:v().func.isRequired,cssKey:v().string,serverListType:v().string,placeId:v().number.isRequired,name:v().string,vipServerId:v().number,maxPlayers:v().number,currentPlayersCount:v().number,vipServerSubscription:{canRenew:v().bool.isRequired,active:v().bool.isRequired,hasInsufficientFunds:v().bool.isRequired,price:v().number.isRequired,expired:v().bool.isRequired},accessCode:v().string,gameServerStatus:v().string.isRequired,canManagePlace:v().bool,showSlowGameMessage:v().bool,owner:{id:v().number.isRequired,name:v().string.isRequired,displayName:v().string.isRequired},players:v().arrayOf(v().any),onShutdownServerSuccess:v().func.isRequired,isLoading:v().bool.isRequired,setIsLoading:v().func.isRequired,systemFeedbackService:v().shape({success:v().func.isRequired,warning:v().func.isRequired}).isRequired};var je=qe,Be=function(){return(Be=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e}).apply(this,arguments)},Ge=u,Ue=l,We=(0,m.withTranslations)((function(e){var r=e.translate,t=e.options,a=e.setOptions;e=void 0!==(e=e.isLoading)&&e;return n().createElement("div",{className:"server-list-options"},n().createElement("div",{className:"select-group"},n().createElement("label",{className:"select-label text-label",htmlFor:"sort-select"},r(Ge.numberOfPlayers)||"Number of Players"),n().createElement("div",{className:"rbx-select-group select-group"},n().createElement("select",{onChange:function(e){f.EventStream.SendEventWithTarget("serverListOptionsInteraction","sortSelect",{pid:j(),sort:e.currentTarget.value},f.EventStream.TargetTypes.WWW),a((function(r){return Be(Be({},r),{sortOrder:e.currentTarget.value})}))},onFocus:function(){f.EventStream.SendEventWithTarget("serverListOptionsInteraction","sortDropdown",{pid:j()},f.EventStream.TargetTypes.WWW)},disabled:e,value:t.sortOrder,id:"sort-select","data-testid":"sort-select",className:"input-field rbx-select select-option"},n().createElement("option",{value:Ue.descending},r(Ge.descending)||"Descending"),n().createElement("option",{value:Ue.ascending},r(Ge.ascending)||"Ascending")),n().createElement("span",{className:"icon-arrow icon-down-16x16"}))),n().createElement("div",{className:"checkbox"},n().createElement("input",{onChange:function(e){f.EventStream.SendEventWithTarget("serverListOptionsInteraction","filterSelect",{pid:j(),checked:e.currentTarget.checked},f.EventStream.TargetTypes.WWW),a((function(r){return Be(Be({},r),{excludeFullGames:e.currentTarget.checked})}))},disabled:e,type:"checkbox",id:"filter-checkbox","data-testid":"filter-checkbox",checked:t.excludeFullGames}),n().createElement("label",{className:"checkbox-label text-label",htmlFor:"filter-checkbox"},r(Ge.hideFullServers)||"Hide Full Servers")))}),U);function He(){return(He=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t,n=arguments[r];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function Ve(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}}(e,r)||function(e,r){if(e){if("string"==typeof e)return _e(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_e(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var ze=(l=Ve((0,H.createSystemFeedback)(),2))[0],$e=l[1],Je=u,Ke=o,Qe=c;function Xe(e){var t=e.translate,a=e.headerTitle,i=e.type,o=e.placeId,s=e.showLoadMoreButton,l=e.gameInstances,c=e.loadMoreGameInstances,u=e.refreshGameInstances,d=e.handleGameInstanceShutdownAtIndex,v=e.userCanManagePlace,m=e.loadingError,p=e.isLoading,f=e.setIsLoading,b=i?"".concat(i,"-"):"",g="rbx-".concat(b,"running-games"),h=0===l.length,y="rbx-".concat(b,"game-server-item-container"),S="card-list rbx-".concat(b,"game-server-item-container"),w="rbx-".concat(b,"running-games-footer"),E=(0,r.useMemo)((function(){var e=l.length%Ke;return 0<e&&s?l.slice(0,-1*e):l}),[l,s]),x=(e=Ve((0,r.useState)(Qe),2))[0];e=e[1];return(0,r.useContext)(Ce),(0,r.useEffect)((function(){null!=u&&u(x)}),[x]),n().createElement(r.Fragment,null,n().createElement(ze,null),n().createElement("div",{id:g,className:"stack server-list-section","data-placeid":o,"data-showshutdown":!0},a&&n().createElement("div",{className:"container-header"},n().createElement("div",{className:"server-list-container-header"},n().createElement("h2",{className:"server-list-header"},a),n().createElement(H.Button,{size:H.Button.sizes.extraSmall,variant:H.Button.variants.control,className:"btn-more rbx-refresh refresh-link-icon",onClick:function(){return u(x)},isDisabled:p},t(Je.privateServerRefreshText)||"Refresh")),""===i&&n().createElement(We,{translate:t,isLoading:p,options:x,setOptions:e})),h?n().createElement("div",{className:"section-content-off empty-game-instances-container"},p?n().createElement(H.Loading,null):n().createElement("p",{className:"no-servers-message"},m?t(Je.loadServersError)||"Unable to load servers.":t(Je.noServersFoundText))):n().createElement(r.Fragment,null,n().createElement("ul",{id:y,className:S},E.map((function(e,r){var a=e.id,s=e.playing,l=e.maxPlayers,c=e.pfs,u=e.vipServerId,m=e.vipServerSubscription,h=e.accessCode,y=e.name,S=e.owner;e=e.players;return n().createElement(je,He({key:g},{id:a,translate:t,cssKey:b,serverListType:i,placeId:o,canManagePlace:v,name:y,vipServerId:u,vipServerSubscription:m,owner:S,accessCode:h,currentPlayersCount:s||e.length,showSlowGameMessage:c<15,gameServerStatus:t(Je.playerCountText,{currentPlayers:s||e.length,maximumAllowedPlayers:l}),players:e,onShutdownServerSuccess:function(){d(r)},systemFeedbackService:$e,isLoading:p,setIsLoading:f,maxPlayers:l}))}))),n().createElement("div",{className:w},s&&n().createElement(H.Button,{type:"button",onClick:function(){return c(x)},className:"rbx-running-games-load-more",variant:H.Button.variants.control,width:H.Button.widths.full,isDisabled:p},t(Je.loadMoreButtonText))))))}Xe.defaultProps={type:"",showLoadMoreButton:!1,loadMoreButtonText:"",headerTitle:"",gameInstances:[]},Xe.propTypes={translate:v().func.isRequired,type:v().string,placeId:v().number.isRequired,headerTitle:v().string,loadMoreGameInstances:v().func.isRequired,showLoadMoreButton:v().bool,loadMoreButtonText:v().string,gameInstances:v().arrayOf(v().any),refreshGameInstances:v().func.isRequired,handleGameInstanceShutdownAtIndex:v().func.isRequired,userCanManagePlace:v().bool.isRequired,isLoading:v().bool.isRequired,setIsLoading:v().func.isRequired,loadingError:v().bool.isRequired};var Ye=(0,m.withTranslations)(Xe,U);function Ze(e){var r=e.type,t=e.translate,a=e.headerTitleResource,i=e.getGameServers,o=(m=G(i)).servers,s=m.loadMoreServers,l=m.refreshServers,c=m.removeServerAtIndex,u=m.hasNext,d=m.isBusy,v=m.setIsBusy,m=(e=m.hasError,(i=m.metaData).placeId);i=i.userCanManagePlace;return n().createElement(Ye,{type:r,placeId:m,gameInstances:o,headerTitle:t(a),showLoadMoreButton:u,loadMoreGameInstances:s,refreshGameInstances:l,handleGameInstanceShutdownAtIndex:c,userCanManagePlace:i,isLoading:d,setIsLoading:v,loadingError:e})}Ze.defaultProps={type:""},Ze.propTypes={type:v().string,translate:v().func.isRequired,headerTitleResource:v().string.isRequired,getGameServers:v().func.isRequired};var er=(0,m.withTranslations)(Ze,U);function rr(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var tr=(c=2,U=function(e){if(Array.isArray(e))return e}(o=o=(0,H.createModal)())||function(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}}(o,c)||function(e,r){if(e){if("string"==typeof e)return rr(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?rr(e,r):void 0}}(o,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],nr=(c=U[1],u),ar=i;function ir(){return(ir=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t,n=arguments[r];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function or(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}}(e,r)||function(e,r){if(e){if("string"==typeof e)return sr(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?sr(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var lr=u;i=(U=or((cr.defaultProps={serverName:"",createServerError:!1,loading:!1},cr.propTypes={translate:v().func.isRequired,privateServerTranslate:v().func.isRequired,thumbnail:v().node.isRequired,assetName:v().string.isRequired,expectedPrice:v().number.isRequired,serverName:v().string,onAction:v().func.isRequired,onServerNameChange:v().func.isRequired,createServerError:v().bool,loading:v().bool,clearForm:v().func.isRequired},[(0,m.withTranslations)(cr,{common:[],feature:"Purchasing.PurchaseDialog"}),c]),2))[0],U=U[1];function cr(e){var r=e.translate,t=e.privateServerTranslate,a=e.assetName,i=e.expectedPrice,o=e.thumbnail,s=e.serverName,l=e.onAction,c=e.onServerNameChange,u=e.clearForm,d=e.loading;e=n().createElement("span",{className:"purchase-private-server-modal-footer-text"},n().createElement(ne.BalanceAfterSaleText,{expectedPrice:i})," ",t(nr.createServerFooterDescription)||"This is a subscription-based feature. It will auto-renew once a month until you cancel the subscription."),o=n().createElement("div",{className:"private-server-purchase"},n().createElement("div",{className:"modal-list-item private-server-main-text",dangerouslySetInnerHTML:{__html:t(nr.createPrivateServerPriceText,{target:(0,te.renderToString)(n().createElement(ne.PriceLabel,{price:i}))})}}),n().createElement("div",{className:"modal-list-item"},n().createElement("span",{className:"text-label private-server-game-name"},t(nr.gameNameText)),n().createElement("span",{className:"game-name"},a)),n().createElement("div",{className:"modal-list-item private-server-name-input"},n().createElement("span",{className:"text-label"},t(nr.serverNameText)),n().createElement("div",{className:"form-group form-has-feedback"},n().createElement("input",{type:"text",value:s,onChange:c,maxLength:ar,className:"form-control input-field private-server-name"}),0<s.length&&n().createElement("p",{className:"form-control-label text-secondary"},s.length,"/",ar))),n().createElement("div",{className:"modal-image-container"},o));return n().createElement(tr,{id:"purchase-private-server-modal",title:t(nr.createPrivateServerTitle),body:o,actionButtonText:r(nr.buyNowText),neutralButtonText:r(nr.cancelAction),footerText:e,onAction:l,onNeutral:u,loading:d,actionButtonShow:!0,disableActionButton:0===s.length})}var ur=(U=or((0,ne.createItemPurchase)({customPurchaseVerificationModal:i,customPurchaseVerificationModalService:U}),2))[0],dr=U[1],vr=R;function mr(e){var t=e.privateServerTranslate,a=e.translate,i=e.universeId,o=e.price,s=e.placeName,l=e.canCreatePrivateServer,c=e.productId,u=e.currency,d=e.sellerId,v=e.sellerName,m=(e=or((0,r.useState)(""),2))[0],p=e[1];return vr().gameDetailPreopenCreatePrivateServerModal&&dr.start(),e=n().createElement(z.Thumbnail2d,{type:z.ThumbnailTypes.gameIcon,size:z.DefaultThumbnailSize,targetId:i,containerClass:"modal-thumb",imgClassName:"original-image",format:z.ThumbnailFormat.jpeg}),n().createElement("span",{className:"rbx-private-server-create"},n().createElement(H.Button,{className:"btn-more rbx-private-server-create-button",size:H.Button.sizes.medium,variant:H.Button.variants.secondary,onClick:dr.start,isDisabled:!l},t(lr.createPrivateServerTitle)),n().createElement(ur,ir({productId:c,expectedPrice:o,thumbnail:e,assetName:s,assetType:t(lr.privateServerLabel),sellerName:v,expectedCurrency:u,expectedSellerId:d,handlePurchase:function(e){var r=e.handleError,t=e.setLoading,n=e.openConfirmation,s=e.closeAll;t(!0),A.createPrivateServer(i,m,o).then((function(e){e=e.data,t(!1),s();var r=e.vipServerId;n({transactionVerb:ne.TransactionVerb.Bought,onAccept:function(){window.location.href=h(r)}})}),(function(e){e=e.data;t(!1),s(),e=null!==(e=null===(e=e.errors)||void 0===e?void 0:e[0].userFacingMessage)&&void 0!==e?e:a(lr.purchaseError),r({showDivId:ne.errorTypeIds.transactionFailure,title:a(lr.transactionFailedHeading),errorMsg:e})}))},customProps:{privateServerTranslate:t,serverName:m,onServerNameChange:function(e){return e=e.target.value,p(e)},clearForm:function(){return p(""),!0}}},{isPrivateServer:!0,isPlace:!0})),!l&&n().createElement("span",{className:"text-footer rbx-private-server-create-disabled-text"},a(lr.maxFreePrivateServersText)))}mr.defaultProps={canCreatePrivateServer:!0,currency:1},mr.propTypes={translate:v().func.isRequired,privateServerTranslate:v().func.isRequired,universeId:v().number.isRequired,price:v().number.isRequired,placeName:v().string.isRequired,canCreatePrivateServer:v().bool,currency:v().number,productId:v().number.isRequired,sellerId:v().number.isRequired,sellerName:v().string.isRequired};var pr=(0,m.withTranslations)(mr,{common:[],feature:"Feature.VIPServer"});function fr(){return(fr=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t,n=arguments[r];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function br(e,r,t,n,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void t(e)}s.done?r(l):Promise.resolve(l).then(n,a)}function gr(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var hr=u,yr=s,Sr=V,wr=d;function Er(e){var t,a=e.translate,i=e.showServers,o=e.intl,s=e.isAboutTab,l=(R=G(A.getVipGameInstances,i)).servers,c=R.loadMoreServers,u=R.refreshServers,d=R.clearServerAtIndex,v=R.hasNext,m=R.isBusy,f=R.setIsBusy,b=R.hasError,g=(C=R.metaData).universeId,h=C.placeId,S=C.placeName,w=C.canCreateServer,E=C.price,x=C.userCanManagePlace,I=C.sellerId,T=C.sellerName,P=C.privateServerProductId,N=(L=l,t=J().gameDetailPrivateServerLimit,L.forEach((function(e){e.owner.id===p.authenticatedUser.id&&--t})),0<t),R=(e=0!==P,'<a class="text-link" href="#!/game-instances">'.concat(a(hr.serversText),"</a>")),C='<a class="text-link" href="'.concat(y(o.getRobloxLocale()),'">').concat(a(hr.privateServerHeader),"</a>"),L=function(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}}(e,r)||function(e,r){if(e){if("string"==typeof e)return gr(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?gr(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(null),2),O=(o=L[0],L[1]);return(0,r.useEffect)((function(){var e;s&&(e=regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(Sr.gameDetails,wr.gameDetails);case 2:r=!(null==(r=e.sent)||!r.ShouldHidePrivateServersInAboutTab),O(r);case 5:case"end":return e.stop()}}),e)})),function(){var r=this,t=arguments;new Promise((function(n,a){var i=e.apply(r,t);function o(e){br(i,n,a,o,s,"next",e)}function s(e){br(i,n,a,o,s,"throw",e)}o(void 0)}))}())}),[s]),o&&s&&!e?null:n().createElement("div",{id:"rbx-private-servers",className:"stack"},n().createElement("div",{className:"container-header"},n().createElement("h2",null,a(hr.privateServerHeader)),i&&e&&n().createElement(H.Button,{size:H.Button.sizes.extraSmall,variant:H.Button.variants.control,className:"btn-more rbx-refresh refresh-link-icon",onClick:function(){return u()},isDisabled:m},a(hr.privateServerRefreshText)),n().createElement(H.Tooltip,{id:"private-server-tooltip",placement:"bottom",content:a(hr.privateServerTooltip)},n().createElement("span",{className:"icon-moreinfo"}))),e?n().createElement(r.Fragment,null,n().createElement("div",{className:"create-server-banner section-content remove-panel"},n().createElement("div",{className:"create-server-banner-text text"},w&&n().createElement("span",{className:"private-server-price",dangerouslySetInnerHTML:{__html:a(hr.privateServerPrice,{price:(0,te.renderToString)(n().createElement(ne.PriceLabel,{price:E}))})}}),n().createElement("span",{className:"play-with-others-text"},a(hr.privateServerPlayWithOthers),n().createElement("br",null),!i&&n().createElement("span",{dangerouslySetInnerHTML:{__html:a(hr.seeAllPrivateServersText,{serversLink:R})}}))),w&&n().createElement(pr,fr({privateServerTranslate:a},{placeName:S,universeId:g,price:E,canCreatePrivateServer:N,sellerId:I,sellerName:T,productId:P}))),n().createElement("div",{className:"section tab-server-only"},i&&n().createElement(Ye,{type:yr.Vip.key,placeId:h,gameInstances:l,showLoadMoreButton:v,loadMoreGameInstances:c,handleGameInstanceShutdownAtIndex:d,userCanManagePlace:x,isLoading:m,setIsLoading:f,loadingError:b}))):n().createElement("div",{className:"section-content-off",dangerouslySetInnerHTML:{__html:a(hr.privateServersNotSupported,{vipServersLink:C})}}))}Er.defaultProps={showServers:!0,isAboutTab:!1},Er.propTypes={translate:v().func.isRequired,showServers:v().bool,intl:v().shape({getRobloxLocale:v().func.isRequired}).isRequired,isAboutTab:v().bool};var xr=(0,m.withTranslations)(Er,W),Ir=(W={gameDetailTabs:W={about:"tab-about",store:"tab-store",servers:"tab-game-instances"},gameDetailHashesToTabs:{"#!/about":W.about,"#!/store":W.store,"#!/game-instances":W.servers}}).gameDetailTabs;function Tr(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Pr(){return Rr()?Ar[window.location.hash]||Nr.about:null}var Nr=W.gameDetailTabs,Ar=W.gameDetailHashesToTabs,Rr=function(){var e=document.getElementById("horizontal-tabs");if(e){var r=Object.values(Ir);try{r.forEach((function(r){if(!e.querySelector("#".concat(r)))throw new Error("Unable to find horizontal tab with id ".concat(r))}))}catch(r){return console.log(r.message),!1}return!0}return!1},Cr=function(){function e(){a(Pr())}var t=function(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}}(e,r)||function(e,r){if(e){if("string"==typeof e)return Tr(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Tr(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(Pr()),2),n=t[0],a=t[1];return(0,r.useEffect)((function(){return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}),[]),n};function Lr(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var Or=s,Fr=u,kr=W.gameDetailTabs;function Dr(){var e=function(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}}(e,r)||function(e,r){if(e){if("string"==typeof e)return Lr(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Lr(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,r.useState)(!1),2),t=e[0],a=e[1],i=Cr();return(0,r.useEffect)((function(){t||i===kr.servers&&a(!0)}),[i,t]),i&&!t?n().createElement(r.Fragment,null):n().createElement(ye,null,n().createElement(xr,null),n().createElement(er,{type:Or.friend.key,getGameServers:A.getFriendsGameInstances,headerTitleResource:Fr.friendsServersTitle}),n().createElement(er,{getGameServers:A.getPublicGameInstances,headerTitleResource:Fr.publicServersTitle}))}Dr.propTypes={};var Mr=Dr,qr="running-game-instances-container",jr="private-server-container-about-tab";(0,e.ready)((function(){document.getElementById(qr)&&(0,a.render)(n().createElement(Mr,null),document.getElementById(qr)),document.getElementById(jr)&&(0,a.render)(n().createElement(xr,{showServers:!1,isAboutTab:!0}),document.getElementById(jr))}))}()}(),window.Roblox&&window.Roblox.BundleDetector&&window.Roblox.BundleDetector.bundleDetected("ServerList");